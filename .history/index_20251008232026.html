<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>No Flash Theme Switch</title>

	<!-- Boxicons -->
	<link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>

	<!-- Base CSS -->
	<style>
		:root {
			--light-bg: #ffffff;
			--dark-bg: #0d47a1; /* deep blue */
			--light-text: #222;
			--dark-text: #f5f5f5;
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		html, body {
			height: 100%;
			font-family: 'Poppins', sans-serif;
			background-color: var(--dark-bg); /* Default dark */
			color: var(--dark-text);
			transition: background-color 0.3s ease, color 0.3s ease;
		}

		html.light-mode, body.light-mode {
			background-color: var(--light-bg);
			color: var(--light-text);
		}

		/* Prevent background flashing */
		html, body, #content, #sidebar {
			transition: none !important;
		}

		a {
			text-decoration: none;
			color: inherit;
		}

		.container {
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
			flex-direction: column;
		}

		h1 {
			margin-bottom: 20px;
		}

		#switch-mode {
			font-size: 24px;
			cursor: pointer;
			background: none;
			border: none;
			color: inherit;
			padding: 10px;
			border-radius: 50%;
			transition: background 0.2s;
		}

		#switch-mode:hover {
			background: rgba(255, 255, 255, 0.2);
		}

		.dropdown {
			position: relative;
			display: inline-block;
			margin-top: 20px;
		}

		.dropdown-content {
			display: none;
			position: absolute;
			right: 0;
			background-color: rgba(255, 255, 255, 0.15);
			backdrop-filter: blur(10px);
			min-width: 140px;
			border-radius: 8px;
			z-index: 999;
		}

		html.light-mode .dropdown-content {
			background-color: #ffffff;
			color: #000;
		}

		.dropdown-content a {
			color: inherit;
			padding: 10px 16px;
			display: block;
			text-decoration: none;
			font-size: 14px;
		}

		.dropdown-content a:hover {
			background-color: rgba(255,255,255,0.1);
		}

		.dropdown.show .dropdown-content {
			display: block;
		}
	</style>

	<!-- Apply saved mode early (prevents flash) -->
	<script>
		(() => {
			const darkMode = localStorage.getItem('darkMode');
			if (darkMode === 'light') {
				document.documentElement.classList.add('light-mode');
				document.body.classList.add('light-mode');
			}
		})();
	</script>
</head>
<body>
	<div class="container">
		<h1>Theme Switch: Light (White) / Dark (Blue)</h1>
		<button id="switch-mode" title="Switch Mode">
			<i class='bx bx-sun'></i>
		</button>

		<div class="dropdown">
			<button id="dropdown-toggle">â˜° Menu</button>
			<div class="dropdown-content">
				<a href="#">Profile</a>
				<a href="#">Settings</a>
				<a href="#">Logout</a>
			</div>
		</div>
	</div>

	<script>
		// Theme switch logic
		const switchMode = document.getElementById('switch-mode');
		const icon = switchMode.querySelector('i');

		function applyMode(isLight) {
			if (isLight) {
				document.documentElement.classList.add('light-mode');
				document.body.classList.add('light-mode');
				icon.classList.replace('bx-moon', 'bx-sun');
				localStorage.setItem('darkMode', 'light');
			} else {
				document.documentElement.classList.remove('light-mode');
				document.body.classList.remove('light-mode');
				icon.classList.replace('bx-sun', 'bx-moon');
				localStorage.setItem('darkMode', 'dark');
			}
		}

		switchMode.addEventListener('click', () => {
			const isLight = !document.body.classList.contains('light-mode');
			applyMode(isLight);
		});

		// Initialize correct icon on load
		if (document.body.classList.contains('light-mode')) {
			icon.classList.add('bx-sun');
		} else {
			icon.classList.add('bx-moon');
		}

		// Dropdown
		const dropdown = document.querySelector('.dropdown');
		const toggle = document.getElementById('dropdown-toggle');
		toggle.addEventListener('click', () => dropdown.classList.toggle('show'));
		window.addEventListener('click', (e) => {
			if (!dropdown.contains(e.target)) dropdown.classList.remove('show');
		});
	</script>
</body>
</html>
